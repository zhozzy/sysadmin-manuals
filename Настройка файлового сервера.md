## Настройка файлового хранилища Samba с авторизацией. Ubuntu 18.04

Научимся устанавливать и настраивать файловый сервер **Samba**. Это ПО известно тем, что для доступа к файлам использует протокол **SMB** - протокол работы с файловым серверам от Microsoft. На самом деле сейчас Samba умеет не только работать файловым сервером, но еще и контроллером доменов, совместимым с Microsoft Active Directory с немного урезанными групповыми политиками.

Настраивать будем на **Ubuntu 18.04 LTS**. Руководство подойдет для организации численностью до 50 человек.

Обновим базу пакетов:
```sudo apt-get update ```

>На боевом сервере лучше сделать бекап перед тем как обновляешь что-либо

Установка самого сервера Samba призводится командой:
```sudo apt-get install samba ```

Идем в папку с конфигурационными файлами Samba. Там будет лежать демонстрационная конфигурация (*smb.conf*).

```cd /etc/samba ```

В данной руководстве будем писать свою конфигурацию, поэтому дефолтную можем сохранить и почитать на досуге.
Создаем свой конфигурационный файл и файл содержащий логины и пароли (в зашифрованном виде):

```sudo touch smb.conf```<br>
```sudo touch smbusers```

Создадим папку, которую будем расшаривать в сеть:
```sudo mkdir /opt/FirstTestShare ```<br>
```sudo chmod 777 /opt/FirstTestShare```

Открываем **smb.conf** и приступаем к редактированию
Конфигурация сервера состоит из нескольких секций. Основная секция **[global]** и каждая шара будет настроена отдельной секцией, также обозначенной квадратными скобками. К примеру **[share1]**, **[share2]**, **[Music]**, **[Video]** и т.д.

Сначала **[global]**

*[global]*  
*server string = Test Fileserver Samba* # Имя сервера. Под ним будет виден в сетевом окружении  
*workgroup = WORKGROUP* # Идентификатор в сетевом окружении    
*server role = standalone server*  # Роль - обычный файловый сервер.



